

package model;

import java.math.BigDecimal;
import java.text.NumberFormat;
import java.util.Locale;

/**
 * Item class with either 2 fields, name and price or
 * 4 fields with 2 additional bulk quantity and bulk price.
 * 
 * @author Nghia (Tony) Le
 * @version Winter 2021
 *
 */

public final class Item {
    
    /**
     * variables to hold data for class Item.
     */ 
    private String myItemName;
    private BigDecimal myItemPrice;
    private int myBulkQuantity = 0;
    private BigDecimal myBulkPrice; 

    /**
     *  variable used to format currency output for myPrice and myBulkPrice. 
     */
    
    private NumberFormat myNF = NumberFormat.getCurrencyInstance(Locale.US);
    
    /**
     * Construct item object with only name and price.
     * 
     * @param theName name of the item
     * @param thePrice price of the item
     * @throws IllegalArgumentException throw exception in case thePrice is negative
     */
    
    public Item(final String theName, final BigDecimal thePrice) 
                    throws IllegalArgumentException {
        
        if (thePrice.compareTo(BigDecimal.valueOf(0)) == -1) {
            throw new IllegalArgumentException();
        }
        
        myItemName = theName;
        myItemPrice = thePrice;
    }

    /**
     * Constructor to create item object with name, price, bulk price, bulk quantity
     * 
     * <p>This item can also be sold in bulk.
     * 
     * @param theName name of the item
     * @param thePrice price of the item
     * @param theBulkQuantity item quantity needed to sell in bulk
     * @param theBulkPrice price tag for the amount of item in bulk
     * @throws IllegalArgumentException throw exception when either 
     *                              thePrice or theBulkPrice is negative
     */
    
    public Item(final String theName, final BigDecimal thePrice, final int theBulkQuantity,
                final BigDecimal theBulkPrice) throws IllegalArgumentException {
        
        if (thePrice.doubleValue() < 0.0 && theBulkPrice.doubleValue() < 0.0 
                        && theBulkQuantity < 0) {
            throw new IllegalArgumentException();
        }
        
        myItemName = theName;
        myItemPrice = thePrice;
        myBulkQuantity = theBulkQuantity;
        myBulkPrice = theBulkPrice;       
    }

    //***************************
    //    Public Methods
    //**************************
    
    /**
     *  Get the price of the Item.
     *  
     * @return item price
     */
    
    public BigDecimal getPrice() {
        return myItemPrice;
    }

    /**
     * get bulk quantity of the item.
     * 
     * @return bulk quantity
     */
    public int getBulkQuantity() {
        return myBulkQuantity;
    }
    
    /**
     * get bulk price of the item.
     * 
     * @return bulk price
     */

    public BigDecimal getBulkPrice() {
        return myBulkPrice;
    }

    /**
     * Determine whether the item can be sold in bulk.
     * 
     * @return bulk or not
     */
    public boolean isBulk() {
        return myBulkQuantity > 0;
    }


    @Override
    public String toString() {
        if (isBulk()) {
            return myItemName + ", " + myNF.format(myItemPrice) 
                            + " (" + myBulkQuantity + " for " + myNF.format(myBulkPrice) + ")";
            
        } else {
            return myItemName + ", " + myNF.format(myItemPrice);
        }
    }
    
    /**
     * Override default equals with my own method.
     * 
     * <p>I did google some example code from GeeksforGeeks
     */
    @Override
    public boolean equals(final Object theOther) {
        
        // it checks whether both variable point to the same object
        if (this == theOther) {
            return true;
        }
        
        // it checks if the argument is of the type Item
        if (theOther == null || theOther.getClass() != this.getClass()) { 
            return false; 
        }
        
        final Item item = (Item) theOther;
        
        // check every single element of the Item object with theOther
        return item.myItemName.equals(this.myItemName) 
                        && item.myItemPrice.equals(this.myItemPrice) 
                        && item.myBulkQuantity == this.myBulkQuantity 
                        && item.myBulkPrice.equals(this.myBulkPrice);
    }

    @Override
    public int hashCode() {

        return 0;
    }

}
